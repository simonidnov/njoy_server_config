var navigation={templates:{header:null,footer:null},default_page:"page/default",page_infos:{descriptor:null,params:null},init:function(){this.load_templates()},set_listeners:function(){$(window).on("hashchange",$.proxy(function(){this.set_params()},this)),""===window.location.hash?window.location.hash=this.default_page:this.set_params()},set_params:function(){for(var e=window.location.hash.replace("#","").split("/"),t={},i=0;i<e.length;i+=2)t[e[i]]=e[i+1];this.page_infos.params=t,this.load_dependencies()},load_dependencies:function(){$.getJSON("pages/"+this.page_infos.params.page+"/descriptor.json",$.proxy(function(e){this.page_infos.descriptor=JSON.parse(JSON.stringify(e))},this))},navigate:function(){},load_templates:function(){_.each(_.keys(this.templates),function(e,t){$.get("views/"+e+".tmpl",$.proxy(function(t){ui.templates[e]=_.template(t)},this))}),0===$("#ui_layer").length&&$("body").append('<div class="ui_layer" id="ui_layer"></div>'),0===$("#ui_templates").length&&($("body").append('<div class="ui_templates" id="ui_templates"></div>'),$.get("views/ui/popin.tmpl",$.proxy(function(e){ui.templates.popin=_.template(e)},this)),$.get("views/ui/notification.tmpl",$.proxy(function(e){ui.templates.notification=_.template(e)},this))),setTimeout($.proxy(function(){$("body").append(this.templates.header({})),$("body").append(this.templates.footer({})),this.set_listeners()},this),200)}};