var receptor={currentShape:[],canvas:null,init:function(){app.socket_callback=$.proxy(function(a){if(typeof a.datas!=="undefined"){this.create_component(a.datas)}},this)},create_component:function(a){switch(a.status){case"init_drawing":$(".module").html("");$(".chronos").remove();TweenMax.killAll();this.init_drawing(a);break;case"drawing":this.drawing(a);break;case"drawing_point":this.drawing_point(a);break;case"video":$(".module").html("");$(".chronos").remove();TweenMax.killAll();$(".module").append('<div class="video_display"><video src="'+window.location.origin+"/"+a.file+'" autoplay></video></div>');break;case"playlist_video":$(".module").append('<div class="video_display"></div>');TweenMax.killAll();console.log("play video playlist");break;case"audio":$(".module").append('<div class="audio_display"></div>');TweenMax.killAll();console.log("play audio");break;case"playlist_audio":$(".module").append('<div class="audio_display"></div>');TweenMax.killAll();console.log("play audio playlist");break;case"picture":$(".module").html("");TweenMax.killAll();$(".module").append('<div class="picture_display"></div>');$(".picture_display").css("background-image","url("+a.file+")");console.log("display picture");break;case"":break;case"success":this.success(a);console.log("this is success");break;case"fail":this.fail(a);console.log("this is fail");break;case"object":this.object_component(a);break;case"golden_family":this.golden_family(a);break}if(typeof a.chronos!=="undefined"){this.setChronos(a.chronos,a.chronos_type)}},object_component:function(a){$(".module").html("");$(".chronos").remove();TweenMax.killAll();switch(a.component){case"quiz_component":break;case"golden_family":$(".module").append('<div class="golden_family"><div class="content_choice"><h3>'+a.tools.menu[a.menu].components.golden_family[a.component_id].desc+'</h3><ul class="choices"></ul></div></div>');var c=a.tools.menu[a.menu].components.golden_family[a.component_id].choices.length;for(var b=0;b<c;b++){$(".receptor .module .golden_family ul.choices").append('<li><div class="front"></div><div class="back">'+a.tools.menu[a.menu].components.golden_family[a.component_id].choices[b]+'<div class="points">'+((c*10)-(b*10))+"</div></div></li>")}break}},golden_family:function(a){if(typeof a.response!=="undefined"){$(".receptor .module .golden_family ul.choices li").eq(parseInt(a.response)).addClass("selected")}},setChronos:function(c,b){if(typeof b==="undefined"){b="bottom"}$(".screen.receptor").append('<div class="chronos '+b+'"><div class="counter"></div><div class="timelap"><div class="progress"></div></div></div>');$(".chronos .counter").html(c);var a=TweenMax.to($(".timelap .progress"),parseInt(c),{css:{width:"100%"},ease:Linear.easeNone,onUpdate:function(d){$(".chronos .counter").html(parseInt(c)-Math.round(a.time()))},onComplete:function(){}})},success:function(){$(".module").append('<canvas class="motion_canvas" id="motion_canvas"></canvas');if(typeof this.conf!=="undefined"){delete this.conf}this.conf=new confettis();this.conf.initConfettis("motion_canvas");this.conf.start_confettis();setTimeout($.proxy(function(){this.conf.stop_confettis()},this),1000)},fail:function(){$(".module").append('<canvas class="motion_canvas" id="motion_canvas"></canvas')},init_drawing:function(a){console.log("init_drawing");$(".module").append('<canvas id="drawing" width="'+a.width+'" height="'+a.height+'"></canvas>');this.canvas=document.getElementById("drawing");this.canvas.width=a.width;this.canvas.height=a.height;this.canvas.style.width=a.width;this.canvas.style.height=a.height;$("#canvas_id").css({width:$("body").width()+"px !important",height:$("body").height()+"px !important"});this.stage=new createjs.Stage("drawing");this.stage.autoClear=true;this.stage.update();this.currentShape=[];var b=new createjs.Shape();this.currentShape[0]=b;var c=b.graphics;c.beginStroke("#000000");this.stage.addChild(b);this.stage.autoClear=true;this.stage.update()},drawing_point:function(a){console.log("drawing_point");var b=new createjs.Point(a.x,a.y)},drawing:function(a){console.log("draw ",this.currentShape[this.currentShape.length-1].graphics);this.currentShape[this.currentShape.length-1].graphics.setStrokeStyle(a.strokestyle.size,a.strokestyle.stylingW,a.strokestyle.stylingH);this.currentShape[this.currentShape.length-1].graphics.lineTo(a.x,a.y);this.currentShape[this.currentShape.length-1].graphics.curveTo(a.curve.oldX,a.curve.oldY,a.curve.oldMidX,a.curve.oldMidY);this.stage.update()},destroy:function(){console.log("destroy receptor")}};var drawer=function(b,d,a){this.canvas=document.getElementById(b);this.canvas.width=d;this.canvas.height=a;this.canvas.style.width=d;this.canvas.style.height=a;$("#canvas_id").css({width:$("body").width()+"px !important",height:$("body").height()+"px !important"});this.stage=new createjs.Stage(b);this.stage.autoClear=true;this.stage.update();this.currentShape=[];var c=new createjs.Shape();this.currentShape[0]=c;var e=c.graphics;e.beginStroke("#000000");this.stage.addChild(c)};