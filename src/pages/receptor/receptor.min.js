var receptor={currentShape:[],canvas:null,init:function(){app.init(function(){}),app.socket_callback=$.proxy(function(e){void 0!==e.datas&&this.create_component(e.datas)},this)},create_component:function(e){switch(e.status){case"init_drawing":$(".module").html(""),$(".chronos").remove(),TweenMax.killAll(),app.socket.emit("njoy",{status:"stop_video"}),app.socket.emit("njoy",{status:"stop_audio"}),setTimeout($.proxy(function(){this.init_drawing(e)},this),300);break;case"drawing":this.drawing(e);break;case"drawing_point":this.drawing_point(e);break;case"video":$(".module").html(""),$(".chronos").remove(),TweenMax.killAll(),$(".module").append('<div class="video_display"><video src="'+app.ip+"/"+e.file+'" autoplay width="'+window.innerWidth+'px" height="'+window.innerHeight+'px" preload></video></div>');break;case"playlist_video":$(".module").append('<div class="video_display"></div>'),TweenMax.killAll(),console.log("play video playlist");break;case"audio":void 0!==this.audio&&this.audio.pause(),this.audio=new Audio(e.file),this.audio.play(),console.log("play audio http://10.213.1.231:3000/",e.file);break;case"playlist_audio":$(".module").append('<div class="audio_display"></div>'),TweenMax.killAll(),console.log("play audio playlist");break;case"picture":$(".module").html(""),TweenMax.killAll(),$(".module").append('<div class="picture_display"></div>'),$(".picture_display").css("background-image","url("+e.file+")"),console.log("display picture");break;case"":break;case"success":this.success(e),console.log("this is success");break;case"fail":this.fail(e),console.log("this is fail");break;case"object":this.object_component(e);break;case"golden_family":this.golden_family(e);break;case"web_content":this.web_content(e)}void 0!==e.chronos&&this.setChronos(e.chronos,e.chronos_type)},web_content:function(e){console.log(e)},object_component:function(e){switch($(".module").html(""),$(".chronos").remove(),TweenMax.killAll(),e.component){case"quiz_component":break;case"golden_family":$(".module").append('<div class="golden_family"><div class="content_choice"><h3>'+e.tools.menu[e.menu].components.golden_family[e.component_id].desc+'</h3><ul class="choices"></ul></div></div>');for(var t=e.tools.menu[e.menu].components.golden_family[e.component_id].choices.length,i=0;i<t;i++)$(".receptor .module .golden_family ul.choices").append('<li><div class="front"></div><div class="back">'+e.tools.menu[e.menu].components.golden_family[e.component_id].choices[i]+'<div class="points">'+(10*t-10*i)+"</div></div></li>")}},golden_family:function(e){void 0!==e.response&&$(".receptor .module .golden_family ul.choices li").eq(parseInt(e.response)).addClass("selected")},setChronos:function(e,t){void 0===t&&(t="bottom"),$(".screen.receptor").append('<div class="chronos '+t+'"><div class="counter"></div><div class="timelap"><div class="progress"></div></div></div>'),$(".chronos .counter").html(e);var i=TweenMax.to($(".timelap .progress"),parseInt(e),{css:{width:"100%"},ease:Linear.easeNone,onUpdate:function(t){$(".chronos .counter").html(parseInt(e)-Math.round(i.time()))},onComplete:function(){}})},success:function(){0==$(".motion_canvas").length&&$(".module").append('<canvas class="motion_canvas" id="motion_canvas"></canvas'),void 0!==this.conf&&delete this.conf,this.conf=new confettis,this.conf.initConfettis("motion_canvas"),this.conf.start_confettis(),setTimeout($.proxy(function(){this.conf.stop_confettis()},this),1e3)},fail:function(){$(".module").append('<canvas class="motion_canvas" id="motion_canvas"></canvas')},init_drawing:function(e){console.log("init_drawing"),$(".module").append('<canvas id="drawing" width="'+e.width+'" height="'+e.height+'"></canvas>'),this.canvas=document.getElementById("drawing"),this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.style.width=window.innerWidth,this.canvas.style.height=window.innerHeight,$("#canvas_id").css({width:$("body").width()+"px !important",height:$("body").height()+"px !important"}),this.stage=new createjs.Stage("drawing"),this.stage.autoClear=!0,this.stage.update(),this.currentShape=[];var t=new createjs.Shape;this.currentShape[0]=t;var i=t.graphics;i.beginStroke("#000000"),this.stage.addChild(t),this.stage.autoClear=!0,this.stage.update()},drawing_point:function(e){console.log("drawing_point with new shape then set oldX Y enstroke",e.x),this.oldX=e.x,this.oldY=e.y,this.currentShape[this.currentShape.length-1].graphics.endStroke().endFill();var t=new createjs.Shape;this.currentShape[this.currentShape.length]=t;var i=t.graphics;i.beginStroke("#000000"),this.stage.addChild(t),i.moveTo(e.x,e.y)},drawing:function(e){console.log(this.oldX);var t=new createjs.Point(e.x,e.y),i=new createjs.Point(this.oldX+t.x>>1,this.oldY+t.y>>1);void 0!==this.currentShape[this.currentShape.length-1]&&(this.currentShape[this.currentShape.length-1].graphics.setStrokeStyle(e.strokestyle.size,e.strokestyle.stylingW,e.strokestyle.stylingH),this.currentShape[this.currentShape.length-1].graphics.moveTo(i.x,i.y),this.currentShape[this.currentShape.length-1].graphics.curveTo(this.oldX,this.oldY,this.oldMidX,this.oldMidY)),this.oldX=t.x,this.oldY=t.y,this.oldMidX=i.x,this.oldMidY=i.y,this.stage.update()},destroy:function(){console.log("destroy receptor")}},drawer=function(e,t,i){this.canvas=document.getElementById(e),this.canvas.width=t,this.canvas.height=i,this.canvas.style.width=t,this.canvas.style.height=i,$("#canvas_id").css({width:$("body").width()+"px !important",height:$("body").height()+"px !important"}),this.stage=new createjs.Stage(e),this.stage.autoClear=!0,this.stage.update(),this.currentShape=[];var s=new createjs.Shape;this.currentShape[0]=s;var o=s.graphics;o.beginStroke("#000000"),this.stage.addChild(s)};